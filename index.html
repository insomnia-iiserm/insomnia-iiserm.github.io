<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Insomnia 2026</title>

<link rel="stylesheet" href="main.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Henny+Penny&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>

<style>
/* =========================================
   AUDIO PLAYER STYLES (Embedded for Speed)
   ========================================= */

.audio-player-container {
    display: none; /* Hidden by default */
    align-items: center;
    justify-content: center;
    gap: 15px;
    margin-top: 15px;
    z-index: 20;
    position: relative;
    opacity: 0; /* For fade in */
}

/* Play Button */
.play-btn-circle {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.4);
    color: white;
    font-size: 16px;
    cursor: pointer;
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.play-btn-circle:hover {
    background: #fff;
    color: #000;
    transform: scale(1.1);
    box-shadow: 0 0 15px rgba(255,255,255,0.4);
}

/* Visualizer Bars */
.music-visualizer {
    display: flex;
    align-items: flex-end;
    gap: 3px;
    height: 25px;
}

.bar {
    width: 4px;
    height: 4px;
    background: #fff;
    border-radius: 2px;
    transition: height 0.1s ease;
}

/* Animation Class (Added via JS) */
.music-visualizer.playing .bar {
    animation: bounce 0.5s infinite ease-in-out alternate;
}

/* Staggered Animation for Wave Effect */
.music-visualizer.playing .bar:nth-child(1) { animation-delay: 0.0s; }
.music-visualizer.playing .bar:nth-child(2) { animation-delay: 0.1s; }
.music-visualizer.playing .bar:nth-child(3) { animation-delay: 0.2s; }
.music-visualizer.playing .bar:nth-child(4) { animation-delay: 0.3s; }
.music-visualizer.playing .bar:nth-child(5) { animation-delay: 0.4s; }
.music-visualizer.playing .bar:nth-child(6) { animation-delay: 0.3s; }
.music-visualizer.playing .bar:nth-child(7) { animation-delay: 0.2s; }
.music-visualizer.playing .bar:nth-child(8) { animation-delay: 0.1s; }

@keyframes bounce {
    0% { height: 4px; }
    100% { height: 25px; }
}
</style>

</head>

<body>

<div class="loader" id="loader">
    <img src="logo.png" class="loader-logo">
    <div class="loader-text">
        <h1>INSOMNIA 2026</h1>
        <p>WAIT IS OVER</p>
    </div>
</div>

<div class="bg"></div>

<nav class="glass-nav" id="nav">
    <div class="nav-left nav-menu">
        <a>Home</a>
        <a>Events</a>
    </div>

    <div class="nav-center" id="navToggle">
        <div class="logo-circle">
            <img src="logo.png">
        </div>
    </div>

    <div class="nav-right nav-menu">
        <a>Leaderboard</a>
        <a>Contacts</a>
    </div>
</nav>

<div class="mobile-menu" id="mobileMenu">
    <a>Home</a>
    <a>Events</a>
    <a>Leaderboard</a>
    <a>Contacts</a>
</div>


<section class="hero">

    <div class="hero-bg">
        <img src="img3.jpg">
    </div>

    <div class="hero-marquee">
        <div class="marquee-track">
            INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 •
            INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 •
        </div>
    </div>

    <div class="spotlight" id="spotlight"></div>

    <div class="artist masked">
        <img id="artistImg">
    </div>

    <div class="artist-info">
        <h2 id="artistName"></h2>
        <p id="eventDate"></p>

        <div class="audio-player-container" id="swastikPlayer">
            <button class="play-btn-circle" id="playBtn">
                ▶
            </button>
            <div class="music-visualizer" id="visualizer">
                <div class="bar"></div><div class="bar"></div><div class="bar"></div>
                <div class="bar"></div><div class="bar"></div><div class="bar"></div>
                <div class="bar"></div><div class="bar"></div>
            </div>
        </div>

    </div>

    <div class="lineup-counter" id="lineupCounter">0 / 5</div>

    <button class="reveal-btn" id="revealBtn">REVEAL LINEUP</button>

    <div class="stage-lights">
        <div></div><div></div><div></div>
    </div>

</section>

<section class="lineup-section">

    <h2 class="section-title">FULL LINEUP</h2>

    <div class="lineup-grid">
        <div class="lineup-main">
            <img src="rahgir.png">
            <div class="lineup-info">
                <h3>RAHGIR</h3>
                <div class="location-pill">22 Feb • FEST GROUND</div>
            </div>
        </div>

        <div class="lineup-side">
            <div class="artist-card">
                <img src="neptune-band.png">
                <h4>BAND NEPTUNE</h4>
                <div class="location-pill">22 Feb • FEST GROUND</div>
            </div>
            <div class="artist-card">
                <img src="dj-mahrac.png">
                <h4>DJ MAHRAC</h4>
                <div class="location-pill">22 Feb • FEST GROUND</div>
            </div>
            <div class="artist-card">
                <img src="dj-tuhina.png">
                <h4>DJ TUHINA</h4>
                <div class="location-pill">22 Feb • FEST GROUND</div>
            </div>
            <div class="artist-card">
                <img src="naman-jain.png">
                <h4>NAMAN JAIN</h4>
                <div class="location-pill">21 Feb • LH7</div>
            </div>
        </div>
    </div>

</section>

<section class="sponsor-section">
    <h2 class="section-title">SPONSORS</h2>
    <div class="sponsor-slider">
        <div class="sponsor-track">
            <img src="sponsor1.png"><img src="sponsor2.png"><img src="sponsor3.png">
            <img src="sponsor4.png"><img src="sponsor5.png">
            <img src="sponsor1.png"><img src="sponsor2.png"><img src="sponsor3.png">
            <img src="sponsor4.png"><img src="sponsor5.png">
        </div>
    </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {

    /* =====================================================
       DOM ELEMENTS
       ===================================================== */
    const loader = document.getElementById("loader");
    const artistBox = document.querySelector(".artist");
    const imgEl = document.getElementById("artistImg");
    const nameEl = document.getElementById("artistName");
    const dateEl = document.getElementById("eventDate");
    const revealBtn = document.getElementById("revealBtn");
    const counterEl = document.getElementById("lineupCounter");
    
    // Player Elements
    const playerContainer = document.getElementById("swastikPlayer");
    const playBtn = document.getElementById("playBtn");
    const visualizer = document.getElementById("visualizer");

    // Nav
    const navToggle = document.getElementById("navToggle");
    const mobileMenu = document.getElementById("mobileMenu");


    /* =====================================================
       AUDIO CONFIGURATION
       ===================================================== */
    // Ensure 'swastik.mp3' is in your folder
    const swastikAudio = new Audio('swastik.mp3');
    swastikAudio.volume = 0.7;
    let isPlaying = false;

    // --- PLAY BUTTON CLICK ---
    playBtn.addEventListener("click", () => {
        if(isPlaying) {
            swastikAudio.pause();
            playBtn.textContent = "▶";
            visualizer.classList.remove("playing");
        } else {
            swastikAudio.play();
            playBtn.textContent = "❚❚"; // Pause icon
            visualizer.classList.add("playing");
        }
        isPlaying = !isPlaying;
    });

    // --- RESET ON END ---
    swastikAudio.addEventListener("ended", () => {
        isPlaying = false;
        playBtn.textContent = "▶";
        visualizer.classList.remove("playing");
    });


    /* =====================================================
       MOBILE NAV LOGIC
       ===================================================== */
    let menuOpen = false;

    function openMenu(){
        if(!mobileMenu) return;
        mobileMenu.classList.add("open");
        gsap.fromTo(mobileMenu,
            {opacity:0, scale:.9},
            {opacity:1, scale:1, duration:.45, ease:"power3.out"}
        );
        menuOpen = true;
    }

    function closeMenu(){
        if(!mobileMenu) return;
        gsap.to(mobileMenu,{
            opacity:0, scale:.9, duration:.35, ease:"power3.in",
            onComplete:()=> mobileMenu.classList.remove("open")
        });
        menuOpen = false;
    }

    navToggle?.addEventListener("click", e=>{
        e.stopPropagation();
        menuOpen ? closeMenu() : openMenu();
    });

    document.addEventListener("click", e=>{
        if(menuOpen && mobileMenu && !mobileMenu.contains(e.target) && !navToggle.contains(e.target)){
            closeMenu();
        }
    });


    /* =====================================================
       ARTIST DATA
       ===================================================== */
    const artists=[
        {name:"Swastik Band", image:"swastik.png", date:"22 Feb • 6–7 PM • FEST GROUND"},
        {name:"BAND NEPTUNE", image:"neptune-band.png", date:"22 Feb • 7–9 PM • FEST GROUND"},
        {name:"DJ MAHRAC", image:"dj-mahrac.png", date:"22 Feb • 9–9:30 PM • FEST GROUND"},
        {name:"DJ TUHINA", image:"dj-tuhina.png", date:"22 Feb • 9:30–10 PM • FEST GROUND"},
        {name:"NAMAN JAIN", image:"naman-jain.png", date:"21 Feb • 6–7 PM • LH7"}
    ];

    let index = -1;
    let locked = false;


    /* =====================================================
       PRELOADER
       ===================================================== */
    async function preloadImages(){
        const promises = artists.map(a=>{
            return new Promise(resolve=>{
                const img = new Image();
                img.src = a.image;
                img.onload = resolve;
                img.onerror = resolve;
            });
        });
        await Promise.all(promises);
    }

    window.addEventListener("load", async ()=>{
        await preloadImages();
        setTimeout(()=> loader.classList.add("hide"), 700);
    });


    /* =====================================================
       UPDATE CONTENT & HANDLE AUDIO PLAYER
       ===================================================== */
    function updateContent(i){
        const a = artists[i];
        
        // Update Text/Image
        imgEl.src = a.image;
        nameEl.textContent = a.name;
        dateEl.textContent = a.date;
        counterEl.textContent = `${i+1} / ${artists.length}`;

        // --- SPECIAL LOGIC FOR SWASTIK ---
        if(a.name === "Swastik Band") {
            // Show player with fade in
            playerContainer.style.display = "flex";
            gsap.fromTo(playerContainer,
                {opacity: 0, y: 10},
                {opacity: 1, y: 0, duration: 0.5, delay: 0.3}
            );
        } else {
            // Hide player & Stop music if moving to next artist
            playerContainer.style.display = "none";
            
            if(isPlaying) {
                swastikAudio.pause();
                swastikAudio.currentTime = 0;
                isPlaying = false;
                playBtn.textContent = "▶";
                visualizer.classList.remove("playing");
            }
        }
    }


    /* =====================================================
       REVEAL TRANSITION
       ===================================================== */
    async function showArtist(i){
        if(locked) return;
        locked = true;

        /* Preload next image to ensure smooth swap */
        const img = new Image();
        img.src = artists[i].image;
        await new Promise(r=>{
            if(img.complete) r();
            else img.onload = r;
        });

        /* GSAP Animation Timeline */
        const tl = gsap.timeline({
            defaults:{ease:"power3.inOut"},
            onComplete:()=> locked=false
        });

        /* Step 1: Fade out old info */
        tl.to(imgEl,{opacity:0, scale:.95, duration:.35})
          .to(".artist-info",{opacity:0, y:20, duration:.35},"<")

        /* Step 2: Swap Content (Invisible moment) */
        .add(()=>{
            updateContent(i);
            artistBox.classList.remove("masked");
        })

        /* Step 3: Fade in new info */
        .fromTo(imgEl,
            {opacity:0, scale:1.05},
            {opacity:1, scale:1, duration:.6}
        )
        .fromTo(".artist-info",
            {opacity:0, y:20},
            {opacity:1, y:0, duration:.6},
            "-=.4"
        );
    }


    /* =====================================================
       BUTTON LOGIC
       ===================================================== */
    function nextArtist(){
        // Initial Click
        if(index === -1){
            index = 0;
            showArtist(index);
            revealBtn.textContent = "NEXT";
            return;
        }

        // End of Lineup
        if(index === artists.length - 1){
            document.body.classList.add("lineup-complete");
            revealBtn.textContent = "SEE FULL LINEUP ↓";
            
            // Stop music if playing
            if(isPlaying) {
                swastikAudio.pause();
                isPlaying = false;
            }

            setTimeout(()=>{
                window.scrollTo({ top: window.innerHeight, behavior: "smooth" });
            }, 400);
            return;
        }

        // Next Artist
        index++;
        showArtist(index);
    }

    revealBtn?.addEventListener("click", nextArtist);


    /* =====================================================
       SCROLL CONTROL (Optional)
       ===================================================== */
    window.addEventListener("wheel", e=>{
        if(!document.body.classList.contains("lineup-complete")){
            e.preventDefault();
        }
    },{passive:false});

    window.addEventListener("touchmove", e=>{
        if(!document.body.classList.contains("lineup-complete")){
            e.preventDefault();
        }
    },{passive:false});

});
</script>

</body>
</html>