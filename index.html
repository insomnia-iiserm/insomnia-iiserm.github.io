<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Insomnia</title>

<link rel="stylesheet" href="main.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Henny+Penny&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
</head>

<body>

<!-- ================= LOADER ================= -->
<div class="loader" id="loader">
<img src="logo.png" class="loader-logo">
<div class="loader-text">
<h1>INSOMNIA 2026</h1>
<p>WAIT IS OVER</p>
</div>
</div>

<div class="bg"></div>

<!-- ================= GLASS NAV ================= -->
<nav class="glass-nav" id="nav">

<div class="nav-left nav-menu">
<a>Home</a>
<a>Events</a>
</div>

<div class="nav-center" id="navToggle">
<div class="logo-circle">
<img src="logo.png">
</div>
</div>

<div class="nav-right nav-menu">
<a>Leaderboard</a>
<a>Contacts</a>
</div>

</nav>

<!-- mobile fullscreen menu -->
<div class="mobile-menu" id="mobileMenu">
<a>Home</a>
<a>Events</a>
<a>Leaderboard</a>
<a>Contacts</a>
</div>


<!-- ================= HERO ================= -->
<section class="hero">

<div class="hero-bg">
<img src="img3.jpg">
</div>

<div class="hero-marquee">
<div class="marquee-track">
INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 •
INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 •
</div>
</div>

<div class="spotlight" id="spotlight"></div>

<div class="artist masked">
<img id="artistImg">
</div>

<div class="artist-info">
<h2 id="artistName"></h2>
<p id="eventDate"></p>
</div>

<div class="lineup-counter" id="lineupCounter">0 / 5</div>

<button class="reveal-btn" id="revealBtn">REVEAL LINEUP</button>

<div class="stage-lights">
<div></div><div></div><div></div>
</div>

</section>

<!-- ================= FULL LINEUP ================= -->
<section class="lineup-section">

<h2 class="section-title">FULL LINEUP</h2>

<div class="lineup-grid">

<!-- MAIN ARTIST -->
<div class="lineup-main">
<img src="rahgir.png">

<div class="lineup-info">
<h3>RAHGIR</h3>
<div class="location-pill">22 Feb • FEST GROUND</div>
</div>
</div>

<!-- OTHER ARTISTS -->
<div class="lineup-side">

<div class="artist-card">
<img src="neptune-band.png">
<h4>BAND NEPTUNE</h4>
<div class="location-pill">22 Feb • FEST GROUND</div>
</div>

<div class="artist-card">
<img src="dj-mahrac.png">
<h4>DJ MAHRAC</h4>
<div class="location-pill">22 Feb • FEST GROUND</div>
</div>

<div class="artist-card">
<img src="dj-tuhina.png">
<h4>DJ TUHINA</h4>
<div class="location-pill">22 Feb • FEST GROUND</div>
</div>

<div class="artist-card">
<img src="naman-jain.png">
<h4>NAMAN JAIN</h4>
<div class="location-pill">21 Feb • LH7</div>
</div>

</div>

</div>

</section>

<!-- ================= SPONSORS ================= -->
<section class="sponsor-section">

<h2 class="section-title">SPONSORS</h2>

<div class="sponsor-slider">
<div class="sponsor-track">

<img src="sponsor1.png">
<img src="sponsor2.png">
<img src="sponsor3.png">
<img src="sponsor4.png">
<img src="sponsor5.png">

<!-- duplicate for infinite loop -->
<img src="sponsor1.png">
<img src="sponsor2.png">
<img src="sponsor3.png">
<img src="sponsor4.png">
<img src="sponsor5.png">

</div>
</div>

</section>

<script>

/* =====================================================
WAIT FOR DOM FIRST
===================================================== */
document.addEventListener("DOMContentLoaded", () => {

/* =====================================================
ELEMENTS
===================================================== */

const loader = document.getElementById("loader");
const artistBox = document.querySelector(".artist");
const imgEl = document.getElementById("artistImg");
const nameEl = document.getElementById("artistName");
const dateEl = document.getElementById("eventDate");
const revealBtn = document.getElementById("revealBtn");
const counterEl = document.getElementById("lineupCounter");

const navToggle = document.getElementById("navToggle");
const mobileMenu = document.getElementById("mobileMenu");


/* =====================================================
MOBILE NAV TOGGLE — PREMIUM
===================================================== */

let menuOpen = false;

function openMenu(){
if(!mobileMenu) return;

mobileMenu.classList.add("open");

gsap.fromTo(mobileMenu,
{opacity:0, scale:.9},
{opacity:1, scale:1, duration:.45, ease:"power3.out"}
);

menuOpen = true;
}

function closeMenu(){
if(!mobileMenu) return;

gsap.to(mobileMenu,{
opacity:0,
scale:.9,
duration:.35,
ease:"power3.in",
onComplete:()=> mobileMenu.classList.remove("open")
});

menuOpen = false;
}

/* toggle click */
navToggle?.addEventListener("click", e=>{
e.stopPropagation();
menuOpen ? closeMenu() : openMenu();
});

/* click outside */
document.addEventListener("click", e=>{
if(menuOpen && mobileMenu && !mobileMenu.contains(e.target) && !navToggle.contains(e.target)){
closeMenu();
}
});

/* ESC close */
document.addEventListener("keydown", e=>{
if(e.key==="Escape" && menuOpen) closeMenu();
});


/* =====================================================
ARTIST DATA
===================================================== */

const artists=[
{name:"RAHGIR",image:"rahgir.png",date:"22 Feb • 6–7 PM • FEST GROUND"},
{name:"BAND NEPTUNE",image:"neptune-band.png",date:"22 Feb • 7–9 PM • FEST GROUND"},
{name:"DJ MAHRAC",image:"dj-mahrac.png",date:"22 Feb • 9–9:30 PM • FEST GROUND"},
{name:"DJ TUHINA",image:"dj-tuhina.png",date:"22 Feb • 9:30–10 PM • FEST GROUND"},
{name:"NAMAN JAIN",image:"naman-jain.png",date:"21 Feb • 6–7 PM • LH7"}
];

let index = -1;
let locked = false;


/* =====================================================
PRELOAD IMAGES (NO FLASH BUG)
===================================================== */

async function preloadImages(){
const promises = artists.map(a=>{
return new Promise(resolve=>{
const img = new Image();
img.src = a.image;
img.onload = resolve;
img.onerror = resolve;
});
});
await Promise.all(promises);
}


/* =====================================================
LOADER
===================================================== */

window.addEventListener("load", async ()=>{
await preloadImages();
setTimeout(()=> loader.classList.add("hide"), 700);
});


/* =====================================================
UPDATE CONTENT
===================================================== */

function updateContent(i){
const a = artists[i];
imgEl.src = a.image;
nameEl.textContent = a.name;
dateEl.textContent = a.date;
counterEl.textContent = `${i+1} / ${artists.length}`;
}


/* =====================================================
NETFLIX FADE TRANSITION
===================================================== */

async function showArtist(i){

if(locked) return;
locked = true;

/* preload next image */
const img = new Image();
img.src = artists[i].image;
await new Promise(r=>{
if(img.complete) r();
else img.onload = r;
});

/* animation */
const tl = gsap.timeline({
defaults:{ease:"power3.inOut"},
onComplete:()=> locked=false
});

/* fade old out */
tl.to(imgEl,{opacity:0, scale:.95, duration:.35})
  .to(".artist-info",{opacity:0, y:20, duration:.35},"<")

/* swap */
.add(()=>{
updateContent(i);
artistBox.classList.remove("masked");
})

/* fade new in */
.fromTo(imgEl,
{opacity:0, scale:1.05},
{opacity:1, scale:1, duration:.6}
)
.fromTo(".artist-info",
{opacity:0, y:20},
{opacity:1, y:0, duration:.6},
"-=.4"
);
}


/* =====================================================
LINEUP FLOW + SCROLL LOCK
===================================================== */

function nextArtist(){

/* first click → reveal */
if(index === -1){
index = 0;
showArtist(index);
revealBtn.textContent = "NEXT";
return;
}

/* last artist → unlock scroll + go next section */
if(index === artists.length - 1){

document.body.classList.add("lineup-complete");

/* change button */
revealBtn.textContent = "SEE FULL LINEUP ↓";

/* smooth scroll to section 2 */
setTimeout(()=>{
window.scrollTo({
top: window.innerHeight,
behavior: "smooth"
});
},400);

return;
}

/* otherwise next */
index++;
showArtist(index);
}

revealBtn?.addEventListener("click", nextArtist);


/* =====================================================
OPTIONAL — BLOCK SCROLL CHEAT BEFORE COMPLETE
===================================================== */

window.addEventListener("wheel", e=>{
if(!document.body.classList.contains("lineup-complete")){
e.preventDefault();
}
},{passive:false});

window.addEventListener("touchmove", e=>{
if(!document.body.classList.contains("lineup-complete")){
e.preventDefault();
}
},{passive:false});

});
</script>


</body>
</html>
