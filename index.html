<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Insomnia 2026</title>

<link rel="stylesheet" href="main.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Henny+Penny&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>

<style>
/* =========================================
   SPOTIFY PLAYER STYLES
   ========================================= */

.spotify-player {
    display: none; /* Hidden by default */
    align-items: center;
    gap: 12px;
    background: rgba(20, 20, 20, 0.85); /* Dark Spotify-ish background */
    padding: 10px 16px;
    border-radius: 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    width: fit-content;
    margin-top: 15px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
    transition: transform 0.3s ease;
}

.spotify-player:hover {
    transform: scale(1.02);
    border-color: rgba(255, 255, 255, 0.2);
}

/* Album Art (Small Circle) */
.spotify-art {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    overflow: hidden;
    background: #333;
    border: 2px solid #121212;
    flex-shrink: 0;
}

.spotify-art img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Track Info + Progress Bar */
.spotify-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-width: 120px;
    margin-right: 8px;
}

.track-name {
    color: #fff;
    font-family: 'Montserrat', sans-serif;
    font-size: 13px;
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 4px;
}

.artist-label {
    color: #b3b3b3;
    font-family: 'Montserrat', sans-serif;
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 0.5px;
}

/* Progress Bar Container */
.progress-bg {
    width: 100%;
    height: 3px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
    margin-top: 4px;
    overflow: hidden;
    position: relative;
}

/* The actual moving bar */
.progress-fill {
    width: 0%;
    height: 100%;
    background-color: #1DB954; /* Spotify Green */
    border-radius: 3px;
    transition: width 0.1s linear;
}

/* Play Button (Green Circle) */
.spotify-play-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #1DB954; /* Spotify Green */
    border: none;
    color: black;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.spotify-play-btn:hover {
    transform: scale(1.1);
    background: #1ed760; /* Lighter Green */
}

.spotify-play-btn span {
    display: block;
    margin-left: 2px; /* Visual centering for triangle */
}

/* When paused (icon switch) */
.spotify-play-btn.playing span {
    margin-left: 0;
    font-weight: 900;
    font-size: 14px;
}
</style>

</head>

<body>

<div class="loader" id="loader">
    <img src="logo.png" class="loader-logo">
    <div class="loader-text">
        <h1>INSOMNIA 2026</h1>
        <p>WAIT IS OVER</p>
    </div>
</div>

<div class="bg"></div>

<nav class="glass-nav" id="nav">
    <div class="nav-left nav-menu">
        <a href="https://insomnia-iiserm.github.io/">Home</a>
        <a href="/events">Events</a>
    </div>

    <div class="nav-center" id="navToggle">
        <div class="logo-circle">
            <img src="logo.png">
        </div>
    </div>

    <div class="nav-right nav-menu">
        <a href="/leaderboard">Leaderboard</a>
        <a href="https://insomnia-iiserm.github.io/#contact">Contacts</a>
    </div>
</nav>

<div class="mobile-menu" id="mobileMenu">
    <a>Home</a>
    <a>Events</a>
    <a>Leaderboard</a>
    <a>Contacts</a>
</div>


<section class="hero">

    <div class="hero-bg">
        <img src="img3.jpg">
    </div>

    <div class="hero-marquee">
        <div class="marquee-track">
            INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 •
            INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 • INSOMNIA 2026 •
        </div>
    </div>

    <div class="spotlight" id="spotlight"></div>

    <div class="artist masked">
        <img id="artistImg">
    </div>

    <div class="artist-info">
        <h2 id="artistName"></h2>
        <p id="eventDate"></p>

        <div class="spotify-player" id="swastikPlayer">
            
            <div class="spotify-art">
                <img src="swastik.png" alt="Album Art">
            </div>

            <div class="spotify-info">
                <div class="track-name">Jogi</div>
                <div class="artist-label">Swastik The Band</div>
                <div class="progress-bg">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <button class="spotify-play-btn" id="playBtn">
                <span>▶</span>
            </button>

        </div>

    </div>

    <div class="lineup-counter" id="lineupCounter">0 / 3</div>

    <button class="reveal-btn" id="revealBtn">REVEAL LINEUP</button>

    <div class="stage-lights">
        <div></div><div></div><div></div>
    </div>

</section>

<section class="lineup-section">

    <h2 class="section-title">FULL LINEUP</h2>

    <div class="lineup-grid">
        
        <div class="lineup-main">
            <img src="swastik.png"> <div class="lineup-info">
                <h3>SWASTIK BAND</h3>
                <div class="location-pill">22 Feb • 6–7 PM • FEST GROUND</div>
            </div>
        </div>

        <div class="lineup-side">
            
            <div class="artist-card">
                <img src="Ishan.png"> <h4>ISHAN KRISHAN</h4>
                <div class="location-pill">21 Feb • 7–9 PM • FEST GROUND</div>
            </div>

            <div class="artist-card">
                <img src="Akshita.png"> <h4>AKSHITA MENGI</h4>
                <div class="location-pill">22 Feb • 9:30–10 PM • FEST GROUND</div>
            </div>
            
        </div>
    </div>

</section>

<section class="sponsor-section">
    <h2 class="section-title">SPONSORS</h2>
    <div class="sponsor-slider">
        <div class="sponsor-track">
            <img src="sponsor1.png"><img src="sponsor2.png"><img src="sponsor3.png">
            <img src="sponsor4.png"><img src="sponsor5.png">
            <img src="sponsor1.png"><img src="sponsor2.png"><img src="sponsor3.png">
            <img src="sponsor4.png"><img src="sponsor5.png">
        </div>
    </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {

    /* =====================================================
       DOM ELEMENTS
       ===================================================== */
    const loader = document.getElementById("loader");
    const artistBox = document.querySelector(".artist");
    const imgEl = document.getElementById("artistImg");
    const nameEl = document.getElementById("artistName");
    const dateEl = document.getElementById("eventDate");
    const revealBtn = document.getElementById("revealBtn");
    const counterEl = document.getElementById("lineupCounter");
    
    // Player Elements
    const playerContainer = document.getElementById("swastikPlayer");
    const playBtn = document.getElementById("playBtn");
    const progressFill = document.getElementById("progressFill");

    // Nav
    const navToggle = document.getElementById("navToggle");
    const mobileMenu = document.getElementById("mobileMenu");


    /* =====================================================
       AUDIO CONFIGURATION
       ===================================================== */
    const swastikAudio = new Audio('swastik.mp3');
    swastikAudio.volume = 0.7;
    let isPlaying = false;

    // --- PLAY BUTTON LOGIC ---
    playBtn.addEventListener("click", () => {
        if(isPlaying) {
            swastikAudio.pause();
            playBtn.innerHTML = "<span>▶</span>";
            playBtn.classList.remove("playing");
        } else {
            swastikAudio.play();
            playBtn.innerHTML = "<span>❚❚</span>"; // Pause Symbol
            playBtn.classList.add("playing");
        }
        isPlaying = !isPlaying;
    });

    // --- PROGRESS BAR UPDATE ---
    swastikAudio.addEventListener("timeupdate", () => {
        if(swastikAudio.duration) {
            const percent = (swastikAudio.currentTime / swastikAudio.duration) * 100;
            progressFill.style.width = percent + "%";
        }
    });

    // --- RESET ON END ---
    swastikAudio.addEventListener("ended", () => {
        isPlaying = false;
        playBtn.innerHTML = "<span>▶</span>";
        playBtn.classList.remove("playing");
        progressFill.style.width = "0%";
    });


    /* =====================================================
       MOBILE NAV
       ===================================================== */
    let menuOpen = false;

    function openMenu(){
        if(!mobileMenu) return;
        mobileMenu.classList.add("open");
        gsap.fromTo(mobileMenu, {opacity:0, scale:.9}, {opacity:1, scale:1, duration:.45, ease:"power3.out"});
        menuOpen = true;
    }

    function closeMenu(){
        if(!mobileMenu) return;
        gsap.to(mobileMenu,{opacity:0, scale:.9, duration:.35, ease:"power3.in", onComplete:()=> mobileMenu.classList.remove("open")});
        menuOpen = false;
    }

    navToggle?.addEventListener("click", e=>{ e.stopPropagation(); menuOpen ? closeMenu() : openMenu(); });
    document.addEventListener("click", e=>{ if(menuOpen && mobileMenu && !mobileMenu.contains(e.target) && !navToggle.contains(e.target)){ closeMenu(); }});


    /* =====================================================
       ARTIST DATA (UPDATED)
       ===================================================== */
    const artists = [
        {name:"Swastik Band", image:"swastik.png", date:"22 Feb • 6–7 PM • FEST GROUND"},
        {name:"Ishan Krishan", image:"Ishan.png", date:"21 Feb • 7–9 PM • FEST GROUND"},
        {name:"Akshita Mengi", image:"Akshita.png", date:"22 Feb • 9:30–10 PM • FEST GROUND"}
    ];

    let index = -1;
    let locked = false;


    /* =====================================================
       PRELOADER
       ===================================================== */
    async function preloadImages(){
        const promises = artists.map(a=>{
            return new Promise(resolve=>{
                const img = new Image();
                img.src = a.image;
                img.onload = resolve;
                img.onerror = resolve;
            });
        });
        await Promise.all(promises);
    }

    window.addEventListener("load", async ()=>{
        await preloadImages();
        setTimeout(()=> loader.classList.add("hide"), 700);
    });


    /* =====================================================
       UPDATE CONTENT
       ===================================================== */
    function updateContent(i){
        const a = artists[i];
        
        imgEl.src = a.image;
        nameEl.textContent = a.name;
        dateEl.textContent = a.date;
        counterEl.textContent = `${i+1} / ${artists.length}`;

        // --- SHOW PLAYER ONLY FOR SWASTIK ---
        if(a.name === "Swastik Band") {
            playerContainer.style.display = "flex";
            gsap.fromTo(playerContainer, {opacity: 0, y: 20}, {opacity: 1, y: 0, duration: 0.5, delay: 0.2, ease: "back.out(1.7)"});
        } else {
            playerContainer.style.display = "none";
            
            // Stop Audio if moving to next artist
            if(isPlaying) {
                swastikAudio.pause();
                swastikAudio.currentTime = 0;
                isPlaying = false;
                playBtn.innerHTML = "<span>▶</span>";
                playBtn.classList.remove("playing");
                progressFill.style.width = "0%";
            }
        }
    }


    /* =====================================================
       REVEAL TRANSITION
       ===================================================== */
    async function showArtist(i){
        if(locked) return;
        locked = true;

        const img = new Image();
        img.src = artists[i].image;
        await new Promise(r=>{ if(img.complete) r(); else img.onload = r; });

        const tl = gsap.timeline({ defaults:{ease:"power3.inOut"}, onComplete:()=> locked=false });

        tl.to(imgEl,{opacity:0, scale:.95, duration:.35})
          .to(".artist-info",{opacity:0, y:20, duration:.35},"<")
          .add(()=>{
            updateContent(i);
            artistBox.classList.remove("masked");
          })
          .fromTo(imgEl, {opacity:0, scale:1.05}, {opacity:1, scale:1, duration:.6})
          .fromTo(".artist-info", {opacity:0, y:20}, {opacity:1, y:0, duration:.6}, "-=.4");
    }


    /* =====================================================
       NEXT BUTTON LOGIC
       ===================================================== */
    function nextArtist(){
        if(index === -1){
            index = 0;
            showArtist(index);
            revealBtn.textContent = "NEXT";
            return;
        }

        if(index === artists.length - 1){
            document.body.classList.add("lineup-complete");
            revealBtn.textContent = "SEE FULL LINEUP ↓";
            if(isPlaying) { swastikAudio.pause(); isPlaying = false; } // Safety stop
            setTimeout(()=>{ window.scrollTo({ top: window.innerHeight, behavior: "smooth" }); }, 400);
            return;
        }

        index++;
        showArtist(index);
    }

    revealBtn?.addEventListener("click", nextArtist);


    /* =====================================================
       SCROLL LOCK
       ===================================================== */
    window.addEventListener("wheel", e=>{ if(!document.body.classList.contains("lineup-complete")){ e.preventDefault(); }},{passive:false});
    window.addEventListener("touchmove", e=>{ if(!document.body.classList.contains("lineup-complete")){ e.preventDefault(); }},{passive:false});

});
</script>

</body>
</html>